DROP DATABASE IF EXISTS WebPos;
CREATE DATABASE IF NOT EXISTS WebPos;
SHOW DATABASES ;
USE WebPos;

DROP TABLE IF EXISTS Customer;
CREATE TABLE IF NOT EXISTS Customer(
   CustId VARCHAR(6),
   CustName VARCHAR(30) NOT NULL DEFAULT 'Unknown',
   Address VARCHAR(30),
   Salary VARCHAR(30),
   CONSTRAINT PRIMARY KEY (CustId)
);
SHOW TABLES ;
DESCRIBE Customer;

DROP TABLE IF EXISTS Order;
CREATE TABLE IF NOT EXISTS `Order`(
   OrderId VARCHAR(15),
   OrderDate DATE,
   CustId VARCHAR(6),
   Total VARCHAR(10),
   CONSTRAINT PRIMARY KEY (OrderId),
   CONSTRAINT FOREIGN KEY (CustId) REFERENCES Customer(CustId) ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES ;
DESCRIBE Order;

DROP TABLE IF EXISTS Item;
CREATE TABLE IF NOT EXISTS Item(
   ItemCode VARCHAR(6),
   Name VARCHAR (50),
   QtyOnHand INT (5),
   UnitPrice DECIMAL (6, 2),
   CONSTRAINT PRIMARY KEY (Itemcode)
);
SHOW TABLES ;
DESCRIBE Item;

DROP TABLE IF EXISTS OrderDetails;
CREATE TABLE IF NOT EXISTS OrderDetails(
   
   OrderId VARCHAR(6),
   ItemCode VARCHAR(6),
   OrderQty INT(11),
   PricePerQty Double(6,2),
   Total Double(6,2),
   CONSTRAINT PRIMARY KEY (ItemCode, OrderId),
   CONSTRAINT FOREIGN KEY (ItemCode) REFERENCES Item(ItemCode) ON DELETE CASCADE ON UPDATE CASCADE ,
   CONSTRAINT FOREIGN KEY (OrderId) REFERENCES `Order`(OrderId) ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES ;
DESCRIBE OrderDetails;